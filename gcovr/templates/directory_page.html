{# -*- engine: jinja -*- #}
{% extends "base.html" %}

{% block summary %}
<div>
  <table class="legend">
    <tr>
      <th scope="row">Directory:</th>
      <td>{{filename}}</td>
    </tr>
    <tr>
      <th scope="row">Date:</th>
      <td>{{date}}</td>
    </tr>
    <tr>
      <th scope="row">Legend:</th>
      <td class="legend">
        <span class="coverage-low">low: &gt;= 0%</span>
        {% if COVERAGE_MED != COVERAGE_HIGH %}
        <span class="coverage-medium">medium: &gt;= {{COVERAGE_MED}}%</span>
        {% endif %}
        {% if COVERAGE_HIGH < 100 %}
        <span class="coverage-high">high: &gt;= {{COVERAGE_HIGH}}%</span>
        {% else %}
        <span class="coverage-high">high: = 100%</span>
        {% endif %}
      </td>
    </tr>
  </table>
</div>

<div>
  <table class="coverage">
    <tr>
      <th></th>
      <th scope="col">Exec</th>
      <th scope="col">Total</th>
      <th scope="col">Coverage</th>
    </tr>
    <tr>
      <th scope="row">Lines:</th>
      <td>{{subdirectory.lines_exec}}</td>
      <td>{{subdirectory.lines_total}}</td>
      <td class="{{subdirectory.lines_class}}">{{subdirectory.lines_percent}}%</td>
    </tr>
    <tr>
      <th scope="row">Branches:</th>
      <td>{{subdirectory.branch_exec}}</td>
      <td>{{subdirectory.branch_total}}</td>
      <td class="{{subdirectory.branch_class}}">{{subdirectory.branch_percent}}%</td>
    </tr>
  </table>
</div>
{% endblock %}

{% block content %}
<table class="file-list coverage">
  <col/>
  <colgroup span="3"/>
  <colgroup span="2"/>

  <tr>
    <th scope="col">File</th>
    <th scope="colgroup" colspan=3>Lines</th>
    <th scope="colgroup" colspan=2>Branches</th>
  </tr>

  {% for row in rows|sort(attribute=row_sort_key) %}

  <tr>
    <th scope="row">
      {% if row.link is not none %}
      <a href="{{row.link}}">{{row.filename}}</a>
      {% else %}
      {{row.filename}}
      {% endif %}
    </th>
    <td style="min-width: 350px" {# ARGO Chrome Hack #}>
      <span class="{{row.lines_class}}"
             style="float: left; width:{{row.lines_percent}}%" {# ARGO Chrome Hack #}
             min="0" max="100" value="{{row.lines_percent}}" title="{{row.lines_percent}}%">{{row.lines_percent}}</span>
    </td>
    <td class="CoverValue line-coverage {{row.lines_class}}">{{row.lines_percent}}%</td>
    <td class="CoverValue line-coverage {{row.lines_class}}">{{row.lines_exec}} / {{row.lines_total}}</td>
    <td class="CoverValue branch-coverage {{row.branch_class}}">{{row.branch_percent}}%</td>
    <td class="CoverValue branch-coverage {{row.branch_class}}">{{row.branch_exec}} / {{row.branch_total}}</td>
  </tr>

  {% endfor %}
</table>
{% endblock %}
